(()=>{"use strict";var t={895:function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(r(850)),a=function(){function t(){this.listeners={},this.event={event:"idle",pattern:"idle",variables:[]},this.regexp=[]}return t.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return n(this,void 0,void 0,(function(){var s,a,u,h=this;return i(this,(function(c){switch(c.label){case 0:return s=this.match(e),(a=Object.keys(s)).length?(u=new o.default,a.forEach((function(t){var e=s[t],o=e.pattern;void 0!==h.listeners[o]&&(e.args=r,h.listeners[o].each((function(t){u.add((function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return n(h,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return Object.assign(this._utilityPurge(this.event),e,t),[4,t.callback.apply(t,r)];case 1:return!1===n.sent()?[2,!1]:[2]}}))}))}),t.priority)})))})),[4,u.run.apply(u,r)]):[2,t.STATUS_NOT_FOUND];case 1:return[2,c.sent()]}}))}))},t.prototype.match=function(t){var e={};return void 0!==this.listeners[t]&&(e[t]={event:t,pattern:t,variables:[]}),this.regexp.forEach((function(r){var n=new RegExp(r.substr(r.indexOf("/")+1,r.lastIndexOf("/")-1),r.substr(r.lastIndexOf("/")+1)),i=t.match(n);if(i&&i.length){var s=[];Array.isArray(i)&&(s=i.slice()).shift(),e[r]={event:t,pattern:r,variables:s}}})),e},t.prototype.on=function(t,e,r){var n=this;return void 0===r&&(r=0),Array.isArray(t)?(t.forEach((function(t){n.on(t,e,r)})),this):(t instanceof RegExp&&(t=t.toString()),0===t.indexOf("/")&&0!==t.lastIndexOf("/")&&this.regexp.push(t),void 0===this.listeners[t]&&(this.listeners[t]=new o.default),this.listeners[t].add(e,r),this)},t.prototype.unbind=function(t,e){var r=this;return void 0===t&&(t=null),void 0===e&&(e=null),t||e?!e&&this.listeners[t]?(delete this.listeners[t],this):(this.listeners[t]&&"function"==typeof e&&(this.listeners[t].unbind(e),this.listeners[t].length||delete this.listeners[t]),t||"function"!=typeof e||Object.keys(this.listeners).forEach((function(t){r.listeners[t].unbind(e),r.listeners[t].length||delete r.listeners[t]})),this):(this._utilityPurge(this.listeners),this)},t.prototype.use=function(e){var r=this;return arguments.length>1?(Array.from(arguments).forEach((function(t,e){r.use(t)})),this):Array.isArray(e)?(this.use.apply(this,e),this):e instanceof t?(Object.keys(e.listeners).forEach((function(t){e.listeners[t].queue.forEach((function(e){r.on(t,e.callback,e.priority)})),e.event=r.event})),this):"function"==typeof e?(this.on("/.*/ig",e),this):this},t.prototype._utilityPurge=function(t){for(var e in t)delete t[e];return t},t.STATUS_NOT_FOUND=o.default.STATUS_EMPTY,t.STATUS_INCOMPLETE=o.default.STATUS_INCOMPLETE,t.STATUS_OK=o.default.STATUS_OK,t}();e.default=a},992:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===e&&(e=500),this.errors={},this.stack="",this.message=t,this.name=this.constructor.name,this.code=e,this.error=new Error(t),this.error.stack&&(this.stack=this.error.stack)}return t.for=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach((function(e){t=t.replace("%s",e)})),new this(t)},t.forErrorsFound=function(t){var e=new this("Invalid Parameters");return e.errors=t,e},t}();e.default=r},784:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.nativeMethods=["constructor","__proto__","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString"],this.definition=t}return t.prototype.isClass=function(){if("object"==typeof this.definition)return!1;var t=this.definition.toString();return 0===t.indexOf("class")||-1!==t.indexOf("_classCallCheck(this,")},t.prototype.getArgumentNames=function(){if("function"!=typeof this.definition)return[];var t=this.definition.toString();0!==t.indexOf("function")&&(t="function "+t);var e=t.replace(/[\r\n\s]+/g," ").match(/(?:function\s*\w*)?\s*(?:\((.*?)\)|([^\s]+))/);if(!e||!e.length)return[];var r=e.slice(1,3).join("").split(/\s*,\s*/);return 1===r.length&&""===r[0]&&r.pop(),r},t.prototype.getDescriptors=function(){return Object.getOwnPropertyDescriptors(this.getMethods())},t.prototype.getMethods=function(){var e=this,r={},n=this.getPrototypeOf();if(!n)return r;Object.getOwnPropertyNames(n).forEach((function(t){if(-1===e.nativeMethods.indexOf(t)){var i=Object.getOwnPropertyDescriptor(n,t);i&&("function"!=typeof i.value?"function"!=typeof i.get&&"function"!=typeof i.set||Object.defineProperty(r,t,i):r[t]=n[t])}}));var i=new t(Object.getPrototypeOf(n));return Object.assign(r,i.getMethods())},t.prototype.getPrototypeOf=function(){return"function"==typeof this.definition?this.definition.prototype:this.definition},t}();e.default=r,e.reflect=function(t){return new r(t)},e.traits=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){};if(!t.length)return n;var i=new r(n);return t.forEach((function(t){var e=new r(t).getDescriptors();Object.keys(e).forEach((function(t){i.getDescriptors()[t]||Object.defineProperty(i.getPrototypeOf(),t,e[t])}))})),n}},434:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t={}),this.data=t}return t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t.length)return this.data;if(!this.has.apply(this,t))return null;var r=t.pop(),n=this.data;return t.forEach((function(t){n=n[t]})),n[r]},t.prototype.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t.length)return!1;var r=!0,n=t.pop(),i=this.data;return t.forEach((function(t){r&&("object"==typeof i[t]?i=i[t]:r=!1)})),!(!r||void 0===i[n])},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t.length)return this;if(!this.has.apply(this,t))return this;var r=t.pop(),n=this.data;return t.forEach((function(t){n=n[t]})),delete n[r],this},t.prototype.set=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length<1)return this;if("object"==typeof e[0])return Object.keys(e[0]).forEach((function(r){t.set(r,e[0][r])})),this;var n=e.pop();return this.walk(this.data,e,n),this},t.prototype.makeArray=function(t){var e=[],r=Object.keys(t);return r.sort(),r.forEach((function(r){e.push(t[r])})),e},t.prototype.makeObject=function(t){return Object.assign({},t)},t.prototype.shouldBeAnArray=function(t){if("object"!=typeof t)return!1;if(!Object.keys(t).length)return!1;for(var e in t)if(isNaN(parseInt(e))||-1!==String(e).indexOf("."))return!1;return!0},t.prototype.walk=function(t,e,r){var n=e.shift();return null!==n&&""!==n||(n=Object.keys(t).length),"object"!=typeof t[n]&&(t[n]={}),e.length?(this.walk(t[n],e,r),!Array.isArray(t[n])&&this.shouldBeAnArray(t[n])?t[n]=this.makeArray(t[n]):Array.isArray(t[n])&&!this.shouldBeAnArray(t[n])&&(t[n]=this.makeObject(t[n])),this):(t[n]=r,this)},t}();e.default=r},850:function(t,e){var r=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.queue=[],this.lower=0,this.upper=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){void 0===e&&(e=0),e>this.upper?this.upper=e:e<this.lower&&(this.lower=e);var r={callback:t,priority:e};return this.queue.push(r),this.queue.sort((function(t,e){return t.priority<=e.priority?1:-1})),this},t.prototype.each=function(t){for(var e=0,r=this.queue;e<r.length;e++)if(!1===t(r[e]))return this;return this},t.prototype.purge=function(t){if("function"!=typeof t)return this.queue.length=0,this;for(var e;this.queue.length;)e=this.queue.shift(),"function"==typeof t&&t(e);return this},t.prototype.push=function(t){return this.add(t,this.lower-1)},t.prototype.shift=function(t){return this.add(t,this.upper+1)},t.prototype.then=function(t){return this.run().then(t),this},t.prototype.run=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return r(this,void 0,void 0,(function(){var r;return n(this,(function(n){switch(n.label){case 0:if(!this.queue.length)return[2,t.STATUS_EMPTY];n.label=1;case 1:return this.queue.length?[4,(r=this.queue.shift()).callback.apply(r,e)]:[3,3];case 2:return!1===n.sent()?[2,t.STATUS_INCOMPLETE]:[3,1];case 3:return[2,t.STATUS_OK]}}))}))},t.prototype.unbind=function(t){var e=this;return this.queue.forEach((function(r,n){t===r.callback&&e.queue.splice(n,1)})),this},t.STATUS_EMPTY=404,t.STATUS_INCOMPLETE=308,t.STATUS_OK=200,t}();e.default=i},574:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=n(r(895));e.EventEmitter=s.default;var o=n(r(992));e.Exception=o.default;var a=n(r(434));e.Registry=a.default;var u=n(r(850));e.TaskQueue=u.default;var h=i(r(784));e.Reflection=h.default,e.reflect=h.reflect,e.traits=h.traits},68:function(t,e){var r=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});class n extends Response{constructor(t,e){super(t,e),this._serialized={},this._response=new Response(t,e),s.forEach((t=>{this._serialized[t]=this._response[t]})),this._body=null,(void 0!==e||"object"!=typeof t||t.constructor&&t.constructor.name)&&(this._body=t)}get body(){return this._body}set body(t){this._body=t,this._response=new Response(this._body,this._serialized),s.forEach((t=>{this._serialized[t]=this._response[t]}))}serialize(){return r(this,void 0,void 0,(function*(){const t=Object.assign({},this._serialized);this.bodyUsed&&(t.body=yield this.text());const e=t.headers;if(e instanceof Headers){t.headers=[];for(const[r,n]of e)t.headers.push([r,n])}return t}))}}e.default=n;const i={},s=["headers","redirected","status","statusText"];["bodyUsed","headers","ok","redirected","status","statusText","type","url"].forEach((t=>{i[t]={get:function(){return this._response[t]}}})),s.forEach((t=>{i[t]=Object.assign(i[t]||{},{set:function(e){this._serialized[t]=e,this._response=new Response(this._body,this._serialized),s.forEach((t=>{this._serialized[t]=this._response[t]}))}})})),Object.keys(i).forEach((t=>{Object.defineProperty(n.prototype,t,i[t])})),["arrayBuffer","blob","clone","error","formData","json","redirect","text"].forEach((t=>{n.prototype[t]=function(...e){return this._response[t](...e)}}))},581:function(t,e){var r=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});class n extends Request{constructor(t,e){super(t,e),this._serialized={},this._request=new Request(t,e),s.forEach((t=>{this._serialized[t]=this._request[t]})),e&&e.body&&(this._serialized.body=e.body)}get body(){return this._serialized.body}serialize(){return r(this,void 0,void 0,(function*(){const t=Object.assign({},this._serialized);this.bodyUsed&&(t.body=yield this.text());const e=t.headers;if(e instanceof Headers){t.headers=[];for(const[r,n]of e)t.headers.push([r,n])}return t}))}}e.default=n;const i={},s=["body","method","cache","credentials","headers","integrity","mode","redirect","referrer","url"];["bodyUsed","cache","credentials","destination","headers","integrity","method","mode","redirect","referrer","referrerPolicy","url"].forEach((t=>{i[t]={get:function(){return this._request[t]}}})),s.forEach((t=>{i[t]=Object.assign(i[t]||{},{set:function(e){this._serialized[t]=e,this._request=new Request(this._serialized.url,this._serialized),s.forEach((t=>{this._serialized[t]=this._request[t]})),"body"===t&&(this._serialized.body=e)}})})),Object.keys(i).forEach((t=>{Object.defineProperty(n.prototype,t,i[t])})),["arrayBuffer","blob","clone","formData","json","text"].forEach((t=>{n.prototype[t]=function(...e){return this._request[t](...e)}}))},763:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(574);class i extends n.EventEmitter{constructor(t,e){super(),this._handler=t,this._stateManager=e}get handler(){return this._handler}get listening(){return this._stateManager.servers.has(this)}listen(){return this._stateManager.add(this),this}close(){return this.listening&&(this._stateManager.remove(this),this.emit("close")),this}}e.default=i},318:function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(763)),o=i(r(581)),a=i(r(68)),u=r(12);class h{constructor(t,e){this._clickPush=function(){},this._currentState=-1,this._listening=!1,this._servers=new Set,this._submitPush=function(){},this._context=t,this._location=t.location,this._history=t.history,this._originalPopState=t.onpopstate,this._originalPushState=this._history.pushState,this._storage=e||new u.MemoryStorage}get servers(){return this._servers}pushState(t,e,r){return n(this,void 0,void 0,(function*(){this._originalPushState.call(this._history,++this._currentState,e,r);const n="object"==typeof t&&t||{};"object"!=typeof t&&void 0!==t&&(n.body=t);const i=new o.default(this._location.href,n),s=new a.default,u=this._storage.getItem(h.StorageKey),c=JSON.parse(u||"[]");this._currentState===c.length?c.push({request:yield i.serialize(),response:yield s.serialize()}):c[this._currentState]={request:yield i.serialize(),response:yield s.serialize()},this._storage.setItem(h.StorageKey,JSON.stringify(c));for(const t of this._servers)yield t.emit("request",i,s),yield t.handler(i,s),yield t.emit("response",i,s)}))}popState(t){return n(this,void 0,void 0,(function*(){const e=JSON.parse(this._context.localStorage.getItem(h.StorageKey)||"[]");let r,n;const i=t.state;e[i]?(r=new o.default(this._location.href,e[i].request),n=new a.default(e[i].response)):(r=new o.default(this._location.href),n=new a.default);for(const t of this._servers)yield t.emit("request",r,n),yield t.handler(r,n),yield t.emit("response",r,n)}))}add(t,e=!0){return"function"==typeof t&&(t=new s.default(t,this)),this._servers.add(t),e&&this.start(),t}clickPush(t){if(t.stop)return;let e=t.target;for(;null!=e;){if("A"!==e.tagName.toUpperCase()){e=e.parentElement;continue}const r=e.href||"";0===r.indexOf(this._location.origin)&&(t.preventDefault(),this._history.pushState({},"",r));break}}remove(t,e=!0){return this._servers.delete(t),!this._servers.size&&e&&this.stop(),this}start(){return this._listening||(this._history.pushState=this.pushState.bind(this),this._context.onpopstate=this.popState.bind(this),this._clickPush=this.clickPush.bind(this),this._submitPush=this.submitPush.bind(this),this._context.document.body.addEventListener("click",this._clickPush,!0),this._context.document.body.addEventListener("submit",this._submitPush,!0),this._listening=!0),this}stop(){return this._listening?(this._history.pushState=this._originalPushState,this._context.onpopstate=this._originalPopState,this._context.document.body.removeEventListener("click",this._clickPush,!0),this._context.document.body.removeEventListener("submit",this._submitPush,!0),this._context.localStorage.removeItem(h.StorageKey),this._currentState=-1,this._listening=!1,this):this}submitPush(t){if(t.stop)return;let e=t.target;for(;null!=e;){if("FORM"!==e.tagName.toUpperCase()){e=e.parentElement;continue}const r=e.getAttribute("action")||this._location.href;if(-1!==r.indexOf("://")&&0!==r.indexOf(this._location.origin))break;t.preventDefault();const n={method:e.getAttribute("method")||"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":e.getAttribute("enctype")||"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer",body:new FormData(e)};this._history.pushState(n,"",r);break}}}e.default=h,h.StorageKey="__http_server_states"},12:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryStorage=void 0,e.MemoryStorage=class{constructor(){this._store={}}getItem(t){return this._store[t]||null}removeItem(t){delete this._store[t]}setItem(t,e){(e&&"object"==typeof e||"function"==typeof e)&&(e=e.toString()),this._store[t]=e}}},722:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(607));!function(t){const e=new i.default.StateManager(t,t.localStorage);i.default.createServer=function(t){return e.add(t,!1)},t.http=i.default}(window)},607:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(763)),s=n(r(68)),o=n(r(581)),a=n(r(318)),u=r(12);e.default={Server:i.default,IncomingResponse:s.default,OutgoingMessage:o.default,StateManager:a.default,MemoryStorage:u.MemoryStorage}}},e={};!function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}(722)})();